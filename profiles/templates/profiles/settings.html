{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="card mt-6">
    <div class="card-body">
        <h1 class="page-title">Profile settings â€” {{ request.user.email }}</h1>
        <form method="post" novalidate class="form-row gap-4">
            {% csrf_token %}
            <div>
                <label for="id_display_name">Display name:</label>
                {{ form.display_name }}
                {% if form.display_name.errors %}
                    <ul>
                        {% for error in form.display_name.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div>
                <label for="id_currency">Currency (ISO code):</label>
                {{ form.currency }}
                {% if form.currency.errors %}
                    <ul>
                        {% for error in form.currency.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div>
                <label for="id_distance_unit">Distance unit:</label>
                {{ form.distance_unit }}
                {% if form.distance_unit.errors %}
                    <ul>
                        {% for error in form.distance_unit.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div>
                <label for="id_volume_unit">Volume unit:</label>
                {{ form.volume_unit }}
                {% if form.volume_unit.errors %}
                    <ul>
                        {% for error in form.volume_unit.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div>
                <label for="id_efficiency_unit">Efficiency unit:</label>
                {{ form.efficiency_unit }}
                {% if form.efficiency_unit.errors %}
                    <ul>
                        {% for error in form.efficiency_unit.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
                <p><small class="muted">Efficiency display is independent of distance/volume preferences.</small></p>
            </div>
            <div>
                <label for="id_utc_offset_minutes">Timezone offset:</label>
                {{ form.utc_offset_minutes }}
                {% if form.utc_offset_minutes.errors %}
                    <ul>
                        {% for error in form.utc_offset_minutes.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
                <p><small class="muted">Timestamps are stored in UTC; this offset will be used later for display.</small></p>
            </div>
            <div class="form-row gap-4">
                <button type="submit" class="btn btn-primary"><img class="icon" src="{% static 'icons/settings.svg' %}" alt=""> Save settings</button>
            </div>
        </form>
    </div>
</div>

<div class="card mt-4">
    <div class="card-body">
        <h2>Preview</h2>
        <p>Distance sample: {{ preview.distance }}</p>
        <p>Volume sample: {{ preview.volume }}</p>
        <p>Currency sample: {{ preview.currency }}</p>
    </div>
</div>
{% endblock %}
