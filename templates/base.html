{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Fuel Tracker{% endblock %}</title>
    <link rel="icon" href="{% static 'favicon.ico' %}" type="image/x-icon">
    <link rel="apple-touch-icon" href="{% static 'img/apple-touch-icon.png' %}">
    <link rel="stylesheet" href="{% static 'css/app.css' %}">
</head>
<body>
    {% with url_name=request.resolver_match.url_name|default:'' %}
        <header class="container" style="padding:18px 0;display:flex;align-items:center;gap:16px;justify-content:space-between">
            <a href="{% url 'home' %}" class="btn btn-ghost" style="gap:10px">
                <img src="{% static 'icons/home.svg' %}" class="icon" alt="">
                <strong>Fuel Tracker</strong>
            </a>
            <nav style="display:flex;gap:8px;flex-wrap:wrap">
                <a href="{% url 'vehicle-list' %}" class="btn btn-ghost{% if url_name == 'vehicle-list' or url_name == 'vehicle-add' or url_name == 'vehicle-edit' or url_name == 'vehicle-delete' %} active{% endif %}">
                    <img src="{% static 'icons/car.svg' %}" class="icon" alt=""> Vehicles
                </a>
                <a href="{% url 'history-list' %}" class="btn btn-ghost{% if url_name == 'history-list' or url_name == 'fillup-edit' or url_name == 'fillup-delete' %} active{% endif %}">
                    <img src="{% static 'icons/history.svg' %}" class="icon" alt=""> History
                </a>
                <a href="{% url 'metrics' %}" class="btn btn-ghost{% if url_name == 'metrics' %} active{% endif %}">
                    <img src="{% static 'icons/chart.svg' %}" class="icon" alt=""> Metrics
                </a>
                <a href="{% url 'statistics' %}" class="btn btn-ghost{% if url_name == 'statistics' %} active{% endif %}">
                    <img src="{% static 'icons/stats.svg' %}" class="icon" alt=""> Statistics
                </a>
                <a href="{% url 'profiles:settings' %}" class="btn btn-ghost{% if url_name == 'settings' %} active{% endif %}">
                    <img src="{% static 'icons/settings.svg' %}" class="icon" alt=""> Settings
                </a>
            </nav>
            <div style="display:flex;gap:8px">
                {% if request.user.is_authenticated %}
                    <span class="btn btn-ghost"><img src="{% static 'icons/user.svg' %}" class="icon" alt=""> {{ request.user.email }}</span>
                    <a href="{% url 'fillup-add' %}?next={{ request.get_full_path|urlencode }}" class="btn btn-primary"><img src="{% static 'icons/plus.svg' %}" class="icon" alt=""> Add fill-up</a>
                    <a href="{% url 'accounts:signout' %}" class="btn btn-secondary"><img src="{% static 'icons/logout.svg' %}" class="icon" alt=""> Sign out</a>
                {% else %}
                    <a href="{% url 'accounts:signin' %}" class="btn btn-primary">Sign in</a>
                {% endif %}
            </div>
        </header>
    {% endwith %}
    {% if messages %}
        <div class="messages container">
            <ul>
                {% for message in messages %}
                    <li class="{{ message.tags }}">{{ message }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
    <main class="container" style="margin: 8px auto 28px;">
        {% block content %}{% endblock %}
    </main>
    <footer class="container" style="padding:22px 0;color:var(--muted);border-top:1px solid var(--border);margin-top:28px">
        Â© {% now "Y" %} Fuel Tracker
        <div class="footer-links">
            <a href="{% url 'legal-terms' %}" class="text-muted">Terms</a>
            <a href="{% url 'legal-privacy' %}" class="text-muted">Privacy</a>
        </div>
    </footer>
</body>
</html>
